<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <title>TowAR</title>
    <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1f00d0beadf87bad7d275c174616e048f8b573fc/dist/aframe-master.min.js"></script>
    <script src="main.js"></script>
    <style>
        #overlay {
            /*   display: none;*/
            margin: 25px;
            z-index: 1001;
            position: absolute;
        }

        #overlay.legacy-ar-mode,
        :xr-overlay {
            display: initial;
        }
    </style>
</head>


<body>
    <div id="overlay">
        <div>
            <button class="select-room" id="add-lobby" value="lobby">lobby</button>
            <button class="select-room" id="add-stairs" value="stairs">stairs</button>
            <button class="select-room" id="add-residential" value="residential">residential</button>
            <button class="select-room" id="add-office" value="office">office</button>
            <button class="select-room" id="add-commercial" value="commercial">commercial</button>
        </div>
        <div>
            <button id="add-floor" value="add-floor">Add Floor</button>
            <button id="current-floor-down" value="down">⬇</button>
            <button id="current-floor-up" value="up">⬆</button>
        </div>
    </div>

    <a-scene game webxr="overlayElement: #overlay;referenceSpaceType:local-floor;requiredFeatures:local-floor,hit-test,dom-overlay" background="color:#333">
        <a-assets>
            <a-asset-item id="voxel-mtl" src="models/towar-0.mtl"></a-asset-item>
            <a-mixin id="voxel-scale" scale="0.0625 0.0625 0.0625"></a-mixin>
            <a-mixin id="placeholder" mixin="voxel-scale" obj-model="obj: models/towar-0.obj; mtl: #voxel-mtl">            </a-mixin>
            <a-mixin id="residential" obj-model="obj: models/towar-1.obj; mtl: #voxel-mtl" mixin="voxel-scale">            </a-mixin>
            <a-mixin id="commercial" obj-model="obj: models/towar-4.obj; mtl: #voxel-mtl" mixin="voxel-scale"></a-mixin>
            <a-mixin id="elevator" obj-model="obj: models/towar-2.obj; mtl: #voxel-mtl" mixin="voxel-scale"></a-mixin>
            <a-mixin id="addfloor" obj-model="obj: models/towar-3.obj; mtl: #voxel-mtl" mixin="voxel-scale"></a-mixin>
            <a-mixin id="office" obj-model="obj: models/towar-5.obj; mtl: #voxel-mtl" mixin="voxel-scale"></a-mixin>
            <a-mixin id="lobby" obj-model="obj: models/towar-6.obj; mtl: #voxel-mtl" mixin="voxel-scale"></a-mixin>
            <a-mixin id="stairs" obj-model="obj: models/towar-7.obj; mtl: #voxel-mtl" mixin="voxel-scale"></a-mixin>

            <a-mixin id="wall-straight-ground" obj-model="obj: models/towar-8.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner-ground" obj-model="obj: models/towar-9.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner2-ground" obj-model="obj: models/towar-14.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner3-ground" obj-model="obj: models/towar-15.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner4-ground" obj-model="obj: models/towar-16.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>

            <a-mixin id="wall-straight" obj-model="obj: models/towar-10.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-straight2-ground" obj-model="obj: models/towar-11.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight3-ground" obj-model="obj: models/towar-12.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight4-ground" obj-model="obj: models/towar-13.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-corner" obj-model="obj: models/towar-17.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner-opposite-ground" obj-model="obj: models/towar-37.obj; mtl: #voxel-mtl"
                mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner-opposite" obj-model="obj: models/towar-38.obj; mtl: #voxel-mtl"
                mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner2" obj-model="obj: models/towar-18.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner3" obj-model="obj: models/towar-19.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-corner4" obj-model="obj: models/towar-20.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-straight2" obj-model="obj: models/towar-21.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-straight3" obj-model="obj: models/towar-22.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-straight4" obj-model="obj: models/towar-23.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>
            <a-mixin id="wall-opposite-ground" obj-model="obj: models/towar-34.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-opposite" obj-model="obj: models/towar-35.obj; mtl: #voxel-mtl" mixin="voxel-scale">
            </a-mixin>

            <a-mixin id="wall-straight-corner-ground" obj-model="obj: models/towar-24.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight-corner" obj-model="obj: models/towar-25.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight-corner-mirror-ground" obj-model="obj: models/towar-30.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight-corner-mirror" obj-model="obj: models/towar-31.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight-corner2-ground" obj-model="obj: models/towar-26.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight-corner2" obj-model="obj: models/towar-27.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight2-corner-ground" obj-model="obj: models/towar-29.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight2-corner" obj-model="obj: models/towar-28.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight2-corner-mirror-ground" obj-model="obj: models/towar-32.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>
            <a-mixin id="wall-straight2-corner-mirror" obj-model="obj: models/towar-33.obj; mtl: #voxel-mtl"
                mixin="voxel-scale"></a-mixin>

            <a-mixin id="floor" obj-model="obj: models/towar-36.obj; mtl: #voxel-mtl" mixin="voxel-scale"></a-mixin>
        </a-assets>

        <a-entity dom-click="element:#add-stairs;target:a-scene"></a-entity>
        <a-entity dom-click="element:#add-lobby;target:a-scene"></a-entity>
        <a-entity dom-click="element:#add-residential;target:a-scene"></a-entity>
        <a-entity dom-click="element:#add-office;target:a-scene"></a-entity>
        <a-entity dom-click="element:#add-commercial;target:a-scene"></a-entity>

        <a-entity dom-click="element:#add-floor;target:#add-floor-component"></a-entity>

        <a-entity dom-click="element:#current-floor-down;target:#tower"></a-entity>
        <a-entity dom-click="element:#current-floor-up;target:#tower"></a-entity>
        
        <a-entity id="add-floor-component" add-floor></a-entity>

        <a-ring id="hit-test" hit-test show-in-ar color="rgb(54,86,60)" rotation="-90 0 0" radius-inner=".1" radius-outer=".15"></a-ring>

        <a-entity hide-in-ar id="tower" tower scale=".5 .5 .5" rotation="0 180 0" position="0 .5 -2"><a-entity floor="level:0" data-level="0"></a-entity>
        </a-entity>

        <a-entity wasd-controls="acceleration:35" camera look-controls="pointerLockEnabled:false;touchEnabled:true"
            position="0 1.7 0">
            <a-entity cursor="rayOrigin: mouse"></a-entity>
<!--             
            <a-entity cursor="fuse: false;" material="color: black; shader: flat" position="0 0 -.5"
                geometry="primitive: ring;radiusInner: 0.007; radiusOuter: 0.009"></a-entity> -->
        </a-entity>

        <!-- <a-entity menu>
            <a-box color="rgb(179, 92, 55)" menu-item="name:residential" position=" 0 -.5 -.15" scale=".1 .01 .05">
            </a-box>
            <a-box color="rgb(30,136,168)" menu-item="name:commercial" position="0 -.5 -.10" scale=".1 .01 .05"></a-box>
            <a-box color="rgb(36,147,110)" menu-item="name:office" position="0 -.5 -.05" scale=".1 .01 .05"></a-box>
        </a-entity> -->
    </a-scene>
</body>

</html>